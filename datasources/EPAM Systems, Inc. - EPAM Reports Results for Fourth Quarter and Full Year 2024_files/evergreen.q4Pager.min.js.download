(n=>{n.widget("evergreen.q4Pager",{options:{content:null,count:0,perPage:1,pages:[],startPage:1,showPrevNext:!0,showPages:!0,trigger:"button",activeClass:"js--active",disabledClass:"js--disabled",template:'<li class="evergreen-pager-list-item"><button class="evergreen-pager-button" tabindex="0" type="button" aria-label="Go to page {{page}}">{{{page}}}</button></li>',clonePager:{toggle:!1,selector:""},labels:{first:'<span class="evergreen-icon-arrow_carrot-2left" aria-hidden="true"></span>',prev:'<span class="evergreen-icon-arrow_carrot-left" aria-hidden="true"></span>',next:'<span class="evergreen-icon-arrow_carrot-right" aria-hidden="true"></span>',last:'<span class="evergreen-icon-arrow_carrot-2right" aria-hidden="true"></span>'},pageMessageContainer:null,pageMessageTemplate:"",beforeChange:function(e,a){},afterChange:function(e,a){}},$items:null,pages:[],currentPage:null,changePage:function(e,a){var t={page:e,prevPage:this.currentPage};this._trigger("beforeChange",a,t),this._setPage(e),this._trigger("afterChange",a,t)},_create:function(){this._bindEvents()},_init:function(){this._drawPager()},_bindEvents:function(){this.options;var e={};e["click "+this.options.trigger]=function(e){let a=n(e.target);a.is("a, button")||(a=a.closest("a, button")),e.preventDefault(),e.stopPropagation(),a.hasClass(this.options.disabledClass)||a.hasClass(this.options.activeClass)||this.changePage(a.data("page"),e)},this._on(e)},_drawPager:function(){var e=this.options,a=this.element;let t,s=null;if("string"==typeof e.content?this.$items=n(e.content):e.content instanceof n&&(this.$items=e.content),this.pages=[],n.isArray(e.pages)&&e.pages.length)this.pages=e.pages,t=this.pages.length,e.startPage&&-1<n.inArray(e.startPage,this.pages)&&(s=e.startPage);else if(this.$items||e.count){t=Math.ceil((this.$items?this.$items.length:e.count)/(e.perPage||1));for(let e=1;e<=t;e++)this.pages.push(e);e.startPage&&(s=Math.max(1,Math.min(t+1,e.startPage)))}a.hasClass("pager")||a.addClass("pager"),a.empty().append('<div class="evergreen-pager-status sr-only" role="status" aria-live="polite"></div><ul class="evergreen-pager-list" />'),this._renderPagers(),this._renderShowPrevNext(),t<=1?a.addClass("js--hidden").attr("aria-hidden","true"):a.hasClass("js--hidden")&&a.removeClass("js--hidden").attr("aria-hidden","false"),1==t&&n(".evergreen-pager-page",a).addClass(e.disabledClass).attr("aria-disabled","true"),null!==s&&this.changePage(s),this._trigger("complete")},_setPage:function(e){var a=this.element,t=this.options;let s=n.inArray(e,this.pages),r=this.pages.length-1;if(-1!=s){if(n(".evergreen-pager-button--prev",a).toggleClass(t.disabledClass,0==s).attr("tabindex",function(e,a){return 0==s?"-1":null}).attr("aria-disabled",function(e,a){return 0==s?"true":null}),n(".evergreen-pager-button--next",a).toggleClass(t.disabledClass,s==r).attr("tabindex",function(e,a){return s==r?"-1":null}).attr("aria-disabled",function(e,a){return s==r?"true":null}),n(".evergreen-pager-button--prev",a).data("page",0<s?this.pages[s-1]:""),n(".evergreen-pager-button--next",a).data("page",s<r?this.pages[s+1]:""),n(".evergreen-pager-page",a).removeClass(t.activeClass).removeAttr("aria-current").filter(function(){return n(this).attr("aria-label","Go to page "+n(this).data("page")),n(this).data("page")==e}).addClass(t.activeClass).attr({"aria-current":"true","aria-label":"Page "+e}),this._setPageRange(e),this.$items&&(i=s*t.perPage,this.$items.addClass("js--hidden").attr("aria-hidden","true").slice(i,i+t.perPage).removeClass("js--hidden").attr("aria-hidden","false")),t.pageMessageContainer&&t.pageMessageTemplate&&(i=this.$items?this.$items.length:t.count,n(t.pageMessageContainer).html(Mustache.render(t.pageMessageTemplate,{page:e,pageCount:this.pages.length,firstItem:s*t.perPage+1,lastItem:Math.min(i,(s+1)*t.perPage),itemCount:i})),i<=t.perPage?n(t.pageMessageContainer).addClass("js--hidden").attr("aria-hidden","true"):n(t.pageMessageContainer).removeClass("js--hidden").attr("aria-hidden","false")),a.find(".evergreen-pager-status").text("Showing page "+e+" of "+this.pages.length),t.clonePager.toggle){var i=t.clonePager.selector||null;if(!i)throw new Error("Please enter an ID for the second pager.");n(i).html(a.clone(!0,!0))}this.currentPage=e}},_renderPagers:function(){let t=this.options,s=this.element;t.showPages&&n.each(this.pages,function(e,a){n(Mustache.render(t.template,{page:a})).appendTo(s.find("ul")).find(t.trigger).addClass("evergreen-pager-page").attr("aria-label","Page "+a).data("page",a)})},_renderShowPrevNext:function(){let e=this,a=this.options,t=this.element,s=t.find(".evergreen-pager-page");var r;a.showPrevNext&&1<s.length&&((r=n(Mustache.render(a.template,{page:a.labels.prev}))).find(a.trigger).addClass("evergreen-pager-button--prev "+a.disabledClass).attr({"aria-label":"Go to previous page","aria-disabled":"true"}),s.first().closest("li").before(r),(r=n(Mustache.render(a.template,{page:a.labels.next}))).find(a.trigger).addClass("evergreen-pager-button--next").attr("aria-label","Go to next page"),s.last().closest("li").after(r)),e._renderDots(),e._setPageRange(),e._resizeListener(function(){e._setPageRange(e.currentPage)})},_renderDots:function(){var e=this.element;e.find(".evergreen-pager-page").first().closest("li").after('<li class="evergreen-pager-list-item evergreen-pager-hide" aria-hidden="true"><span class="evergreen-pager-dots evergreen-pager-dots--first">...</span></li>'),e.find(".evergreen-pager-page").last().closest("li").before('<li class="evergreen-pager-list-item evergreen-pager-hide" aria-hidden="true"><span class="evergreen-pager-dots evergreen-pager-dots--last">...</span></li>')},_setPageRange:function(e){e=e??1,this.options.showPrevNext&&(window.matchMedia("(max-width: 480px)").matches?this._setPageRangeForMobile(e):this._setPageRangeForDesktop(e))},_setPageRangeForDesktop:function(e){8<this.pages.length?(this._hideShowDots(e),this._hideShowPageRange(e)):this._hideShowPageRangeWithMinimumPages(e)},_setPageRangeForMobile:function(a){var e=this.element,t=e.find(".evergreen-pager-page"),s="evergreen-pager-hide",e=(e.find(".evergreen-pager-dots").closest("li").addClass(s),t.slice(0,a-1)),r=t.slice(a,this.pages.length),i=(t.removeClass(s),$(e).addClass(s),$(r).addClass(s),[]);for(let e=0;e<this.pages.length;e+=4)i.push(this.pages.slice(e,e+4));e=i.find(e=>e.includes(a)),r=e?.[0]??1,e=e?.[3];t.removeClass(s),t.slice(0,r-1).addClass(s),null!=e&&t.slice(e,this.pages.length).addClass(s)},_hideShowPageRangeWithMinimumPages:function(e){var a=this.element,t=this.pages.length,s="evergreen-pager-hide",r=a.find(".evergreen-pager-page").removeClass(s),i=a.find(".evergreen-pager-dots--first").closest("li"),a=a.find(".evergreen-pager-dots--last").closest("li");i.addClass(s),a.addClass(s),8===t&&(e<5?(r.slice(0,5).removeClass(s),r.slice(5,7).addClass(s),r.eq(7).removeClass(s),a):(r.slice(1,3).addClass(s),r.eq(0).removeClass(s),r.slice(3,8).removeClass(s),i)).removeClass(s)},_hideShowDots:function(e){var a=this.element,t=this.pages.length-4,s="evergreen-pager-hide",r=a.find(".evergreen-pager-dots--first").closest("li"),a=a.find(".evergreen-pager-dots--last").closest("li");r.addClass(s),a.addClass(s),5<=e&&r.removeClass(s),e<=t&&a.removeClass(s)},_hideShowPageRange:function(e){var a=this.element,t=this.pages.length,s=t-1,r=t-4,i="evergreen-pager-hide",a=a.find(".evergreen-pager-page");a.slice(1,s).addClass(i),(e<5?a.slice(0,5):r<e?a.slice(r-1,t):a.slice(e-2,e+1)).removeClass(i)},_resizeListener:function(a){window.addEventListener("resize",function(){var e=window.matchMedia("(max-width: 480px)").matches;a(e)})}})})($tudio);